{"ast":null,"code":"'use strict';\n\nvar request = require('request');\n\nvar OAuth = require('oauth-1.0a');\n\nvar createHmac = require('create-hmac');\n\nvar promise = require('bluebird');\n\nvar _url = require('url');\n\nmodule.exports = WooCommerceAPI;\n/**\n * WooCommerce REST API wrapper\n *\n * @param {Object} opt\n */\n\nfunction WooCommerceAPI(opt) {\n  if (!(this instanceof WooCommerceAPI)) {\n    return new WooCommerceAPI(opt);\n  }\n\n  opt = opt || {};\n\n  if (!opt.url) {\n    throw new Error('url is required');\n  }\n\n  if (!opt.consumerKey) {\n    throw new Error('consumerKey is required');\n  }\n\n  if (!opt.consumerSecret) {\n    throw new Error('consumerSecret is required');\n  }\n\n  this.classVersion = '1.5.0';\n\n  this._setDefaultsOptions(opt);\n}\n/**\n * Set default options\n *\n * @param {Object} opt\n */\n\n\nWooCommerceAPI.prototype._setDefaultsOptions = function (opt) {\n  this.url = opt.url;\n  this.wpAPI = opt.wpAPI || false;\n  this.wpAPIPrefix = opt.wpAPIPrefix || 'wp-json';\n  this.version = opt.version || 'v3';\n  this.isSsl = /^https/i.test(this.url);\n  this.consumerKey = opt.consumerKey;\n  this.consumerSecret = opt.consumerSecret;\n  this.verifySsl = false === opt.verifySsl ? false : true;\n  this.encoding = opt.encoding || 'utf8';\n  this.queryStringAuth = opt.queryStringAuth || false;\n  this.port = opt.port || '';\n  this.timeout = opt.timeout;\n  this.agent = opt.agent;\n};\n/**\n * Normalize query string for oAuth\n *\n * @param  {string} url\n * @return {string}\n */\n\n\nWooCommerceAPI.prototype._normalizeQueryString = function (url) {\n  // Exit if don't find query string\n  if (-1 === url.indexOf('?')) {\n    return url;\n  }\n\n  var query = _url.parse(url, true).query;\n\n  var params = [];\n  var queryString = '';\n\n  for (var p in query) {\n    params.push(p);\n  }\n\n  params.sort();\n\n  for (var i in params) {\n    if (queryString.length) {\n      queryString += '&';\n    }\n\n    queryString += encodeURIComponent(params[i]).replace(/%5B/g, '[').replace(/%5D/g, ']');\n    queryString += '=';\n    queryString += encodeURIComponent(query[params[i]]);\n  }\n\n  return url.split('?')[0] + '?' + queryString;\n};\n/**\n * Get URL\n *\n * @param  {String} endpoint\n *\n * @return {String}\n */\n\n\nWooCommerceAPI.prototype._getUrl = function (endpoint) {\n  var url = '/' === this.url.slice(-1) ? this.url : this.url + '/';\n  var api = this.wpAPI ? this.wpAPIPrefix + '/' : 'wc-api/';\n  url = url + api + this.version + '/' + endpoint; // Include port.\n\n  if ('' !== this.port) {\n    var hostname = _url.parse(url, true).hostname;\n\n    url = url.replace(hostname, hostname + ':' + this.port);\n  }\n\n  if (!this.isSsl) {\n    return this._normalizeQueryString(url);\n  }\n\n  return url;\n};\n/**\n * Get OAuth\n *\n * @return {Object}\n */\n\n\nWooCommerceAPI.prototype._getOAuth = function () {\n  var data = {\n    consumer: {\n      key: this.consumerKey,\n      secret: this.consumerSecret\n    },\n    signature_method: 'HMAC-SHA256',\n    hash_function: function (base_string, key) {\n      return createHmac('sha256', key).update(base_string).digest('base64');\n    }\n  };\n\n  if (-1 < ['v1', 'v2'].indexOf(this.version)) {\n    data.last_ampersand = false;\n  }\n\n  return new OAuth(data);\n};\n/**\n * Do requests\n *\n * @param  {String}   method\n * @param  {String}   endpoint\n * @param  {Object}   data\n * @param  {Function} callback\n *\n * @return {Object}\n */\n\n\nWooCommerceAPI.prototype._request = function (method, endpoint, data, callback) {\n  var url = this._getUrl(endpoint);\n\n  var params = {\n    url: url,\n    method: method,\n    encoding: this.encoding,\n    timeout: this.timeout,\n    headers: {\n      'User-Agent': 'WooCommerce API Client-Node.js/' + this.classVersion,\n      'Accept': 'application/json'\n    }\n  }; // Allow a keep-alive (or other) agent\n\n  if (this.agent) {\n    params.agent = this.agent;\n  }\n\n  if (this.isSsl) {\n    if (this.queryStringAuth) {\n      params.qs = {\n        consumer_key: this.consumerKey,\n        consumer_secret: this.consumerSecret\n      };\n    } else {\n      params.auth = {\n        user: this.consumerKey,\n        pass: this.consumerSecret\n      };\n    }\n\n    if (!this.verifySsl) {\n      params.strictSSL = false;\n    }\n  } else {\n    params.qs = this._getOAuth().authorize({\n      url: url,\n      method: method\n    });\n  }\n\n  if (data) {\n    params.headers['Content-Type'] = 'application/json;charset=utf-8';\n    params.body = JSON.stringify(data);\n  }\n\n  if (!callback) {\n    return request(params);\n  }\n\n  return request(params, callback);\n};\n/**\n * GET requests\n *\n * @param  {String}   endpoint\n * @param  {Function} callback\n *\n * @return {Object}\n */\n\n\nWooCommerceAPI.prototype.get = function (endpoint, callback) {\n  return this._request('GET', endpoint, null, callback);\n};\n/**\n * POST requests\n *\n * @param  {String}   endpoint\n * @param  {Object}   data\n * @param  {Function} callback\n *\n * @return {Object}\n */\n\n\nWooCommerceAPI.prototype.post = function (endpoint, data, callback) {\n  return this._request('POST', endpoint, data, callback);\n};\n/**\n * PUT requests\n *\n * @param  {String}   endpoint\n * @param  {Object}   data\n * @param  {Function} callback\n *\n * @return {Object}\n */\n\n\nWooCommerceAPI.prototype.put = function (endpoint, data, callback) {\n  return this._request('PUT', endpoint, data, callback);\n};\n/**\n * DELETE requests\n *\n * @param  {String}   endpoint\n * @param  {Function} callback\n *\n * @return {Object}\n */\n\n\nWooCommerceAPI.prototype.delete = function (endpoint, callback) {\n  return this._request('DELETE', endpoint, null, callback);\n};\n/**\n * OPTIONS requests\n *\n * @param  {String}   endpoint\n * @param  {Function} callback\n *\n * @return {Object}\n */\n\n\nWooCommerceAPI.prototype.options = function (endpoint, callback) {\n  return this._request('OPTIONS', endpoint, null, callback);\n};\n/**\n * Promifying all requests exposing new methods\n * named [method]Async like in getAsync()\n */\n\n\npromise.promisifyAll(WooCommerceAPI.prototype);","map":{"version":3,"sources":["C:/reactwoocom/node_modules/woocommerce-api/index.js"],"names":["request","require","OAuth","createHmac","promise","_url","module","exports","WooCommerceAPI","opt","url","Error","consumerKey","consumerSecret","classVersion","_setDefaultsOptions","prototype","wpAPI","wpAPIPrefix","version","isSsl","test","verifySsl","encoding","queryStringAuth","port","timeout","agent","_normalizeQueryString","indexOf","query","parse","params","queryString","p","push","sort","i","length","encodeURIComponent","replace","split","_getUrl","endpoint","slice","api","hostname","_getOAuth","data","consumer","key","secret","signature_method","hash_function","base_string","update","digest","last_ampersand","_request","method","callback","headers","qs","consumer_key","consumer_secret","auth","user","pass","strictSSL","authorize","body","JSON","stringify","get","post","put","delete","options","promisifyAll"],"mappings":"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","sourcesContent":["'use strict';\n\nvar request    = require('request');\nvar OAuth      = require('oauth-1.0a');\nvar createHmac = require('create-hmac');\nvar promise    = require('bluebird');\nvar _url       = require('url');\n\nmodule.exports = WooCommerceAPI;\n\n/**\n * WooCommerce REST API wrapper\n *\n * @param {Object} opt\n */\nfunction WooCommerceAPI(opt) {\n  if (!(this instanceof WooCommerceAPI)) {\n    return new WooCommerceAPI(opt);\n  }\n\n  opt = opt || {};\n\n  if (!(opt.url)) {\n    throw new Error('url is required');\n  }\n\n  if (!(opt.consumerKey)) {\n    throw new Error('consumerKey is required');\n  }\n\n  if (!(opt.consumerSecret)) {\n    throw new Error('consumerSecret is required');\n  }\n\n  this.classVersion = '1.5.0';\n  this._setDefaultsOptions(opt);\n}\n\n/**\n * Set default options\n *\n * @param {Object} opt\n */\nWooCommerceAPI.prototype._setDefaultsOptions = function(opt) {\n  this.url             = opt.url;\n  this.wpAPI           = opt.wpAPI || false;\n  this.wpAPIPrefix     = opt.wpAPIPrefix || 'wp-json';\n  this.version         = opt.version || 'v3';\n  this.isSsl           = /^https/i.test(this.url);\n  this.consumerKey     = opt.consumerKey;\n  this.consumerSecret  = opt.consumerSecret;\n  this.verifySsl       = false === opt.verifySsl ? false : true;\n  this.encoding        = opt.encoding || 'utf8';\n  this.queryStringAuth = opt.queryStringAuth || false;\n  this.port            = opt.port || '';\n  this.timeout         = opt.timeout;\n  this.agent           = opt.agent;\n};\n\n/**\n * Normalize query string for oAuth\n *\n * @param  {string} url\n * @return {string}\n */\nWooCommerceAPI.prototype._normalizeQueryString = function(url) {\n  // Exit if don't find query string\n  if (-1 === url.indexOf('?')) {\n    return url;\n  }\n\n  var query       = _url.parse(url, true).query;\n  var params      = [];\n  var queryString = '';\n\n  for (var p in query) {\n    params.push(p);\n  }\n  params.sort();\n\n  for (var i in params) {\n    if (queryString.length) {\n      queryString += '&';\n    }\n\n    queryString += encodeURIComponent(params[i]).replace(/%5B/g, '[')\n      .replace(/%5D/g, ']');\n    queryString += '=';\n    queryString += encodeURIComponent(query[params[i]]);\n  }\n\n  return url.split('?')[0] + '?' + queryString;\n};\n\n/**\n * Get URL\n *\n * @param  {String} endpoint\n *\n * @return {String}\n */\nWooCommerceAPI.prototype._getUrl = function(endpoint) {\n  var url = '/' === this.url.slice(-1) ? this.url : this.url + '/';\n  var api = this.wpAPI ? this.wpAPIPrefix + '/' : 'wc-api/';\n\n  url = url + api + this.version + '/' + endpoint;\n\n  // Include port.\n  if ('' !== this.port) {\n    var hostname = _url.parse(url, true).hostname;\n    url = url.replace(hostname, hostname + ':' + this.port);\n  }\n\n  if (!this.isSsl) {\n    return this._normalizeQueryString(url);\n  }\n\n  return url;\n};\n\n/**\n * Get OAuth\n *\n * @return {Object}\n */\nWooCommerceAPI.prototype._getOAuth = function() {\n  var data = {\n    consumer: {\n      key: this.consumerKey,\n      secret: this.consumerSecret\n    },\n    signature_method: 'HMAC-SHA256',\n    hash_function: function(base_string, key) {\n        return createHmac('sha256', key).update(base_string)\n          .digest('base64');\n    }\n  };\n\n  if (-1 < [ 'v1', 'v2' ].indexOf(this.version)) {\n    data.last_ampersand = false;\n  }\n\n  return new OAuth(data);\n};\n\n/**\n * Do requests\n *\n * @param  {String}   method\n * @param  {String}   endpoint\n * @param  {Object}   data\n * @param  {Function} callback\n *\n * @return {Object}\n */\nWooCommerceAPI.prototype._request = function(method, endpoint, data, callback) {\n  var url = this._getUrl(endpoint);\n\n  var params = {\n    url: url,\n    method: method,\n    encoding: this.encoding,\n    timeout: this.timeout,\n    headers: {\n      'User-Agent': 'WooCommerce API Client-Node.js/' + this.classVersion,\n      'Accept': 'application/json'\n    }\n  };\n\n  // Allow a keep-alive (or other) agent\n  if (this.agent) {\n    params.agent = this.agent;\n  }\n\n  if (this.isSsl) {\n    if (this.queryStringAuth) {\n      params.qs = {\n        consumer_key: this.consumerKey,\n        consumer_secret: this.consumerSecret\n      };\n    } else {\n      params.auth = {\n        user: this.consumerKey,\n        pass: this.consumerSecret\n      };\n    }\n\n    if (!this.verifySsl) {\n      params.strictSSL = false;\n    }\n  } else {\n    params.qs = this._getOAuth().authorize({\n      url: url,\n      method: method\n    });\n  }\n\n  if (data) {\n    params.headers['Content-Type'] = 'application/json;charset=utf-8';\n    params.body = JSON.stringify(data);\n  }\n\n  if (!callback) {\n    return request(params);\n  }\n\n  return request(params, callback);\n};\n\n/**\n * GET requests\n *\n * @param  {String}   endpoint\n * @param  {Function} callback\n *\n * @return {Object}\n */\nWooCommerceAPI.prototype.get = function(endpoint, callback) {\n  return this._request('GET', endpoint, null, callback);\n};\n\n/**\n * POST requests\n *\n * @param  {String}   endpoint\n * @param  {Object}   data\n * @param  {Function} callback\n *\n * @return {Object}\n */\nWooCommerceAPI.prototype.post = function(endpoint, data, callback) {\n  return this._request('POST', endpoint, data, callback);\n};\n\n/**\n * PUT requests\n *\n * @param  {String}   endpoint\n * @param  {Object}   data\n * @param  {Function} callback\n *\n * @return {Object}\n */\nWooCommerceAPI.prototype.put = function(endpoint, data, callback) {\n  return this._request('PUT', endpoint, data, callback);\n};\n\n/**\n * DELETE requests\n *\n * @param  {String}   endpoint\n * @param  {Function} callback\n *\n * @return {Object}\n */\nWooCommerceAPI.prototype.delete = function(endpoint, callback) {\n  return this._request('DELETE', endpoint, null, callback);\n};\n\n/**\n * OPTIONS requests\n *\n * @param  {String}   endpoint\n * @param  {Function} callback\n *\n * @return {Object}\n */\nWooCommerceAPI.prototype.options = function(endpoint, callback) {\n  return this._request('OPTIONS', endpoint, null, callback);\n};\n\n/**\n * Promifying all requests exposing new methods\n * named [method]Async like in getAsync()\n */\npromise.promisifyAll(WooCommerceAPI.prototype);\n"]},"metadata":{},"sourceType":"script"}